# Отчет по лаборатоной работе №2. Плохие и хорошие практики при работе с Docker

## 1. Плохие практики в Dockerfile:

### Ошибка №1. Использование общего базового образа
**В чем ошибка?**  
Проблема использования образа python:3.8, заключается в том, что он включает в себя много ненужных библиотек и файлов. Это увеличивает размер контейнера и замедляет его загрузку и использование
Также лишние компоненты могут сделать контейнер менее безопасным

---

### Ошибка №2. Установка зависимостей без оптимизации слоев
**В чем ошибка?**  
Из-за того что, зависимости устанавливаются сразу после копирования всего проекта, любое изменение приводит к тому, что нужно пересобирать все слои
Это сильно замедляет процесс сборки
---

### Ошибка №3. Запуск приложения под root
**В чем ошибка?** 
Ключнвая проблема  в том, что мы запускаем контейнера с правами администратора и это карйне не безопасно 
Так как, если кто-то получит доступ к нему, то у него будет полный контроль над контейнером

---

## 2. Хорошие практики в Dockerfile:
### Ошибка 1. Исправление
Вместо тяжелого образа лучше использовать минималистичный образ, например, python:3.12-slim.
Этот образ содержит только самые нужные файлы и библиотеки, что делает контейнер легче и безопаснее.

---
### Ошибка 2. Исправление

Чтобы избежать установку зависимостей без оптимизации слоев, можно сначала скопировать только файлы с зависимостями, и уже на основе этого устанавливать библиотеки
Таким образом, при изменении кода проекта слои с библиотеками остаются нетронутыми, и Docker использует кэш для ускорения сборки
---

### Ошибка 3. Исправление

Следует создавать отдельного пользователя с минимальными правами
Это ограничит возможности злоумышленника, (или просто человека, который может сделать что-то не нужное) если он получит доступ к контейнеру, то не сможет сделать с ним больше, чем у него есть на это прав

## Плохие практики в работе с контейнерами:

### 1. Запуск контейнеров под root
**В чем ошибка?** 
Если внутри Dockerfile пользователь настроен правильно, можно допустить ошибку при запуске контейнера
Если запустить контейнер с правами root, это снова открывает контейнер для потенциальных атак
Контейнер будет иметь полный доступ к системе, что опасно.

Как избежать:
При запуске контейнера можно использовать параметр --user, чтобы явно указать, под каким пользователем запускать приложение
Это увеличит безопасность при работе с контейнером
---

### 2. Отсутствие контроля за ресурсами контейнера
**В чем ошибка?**
Если не ограничить использование памяти или процессорного времени, контейнер может начать использовать слишком много ресурсов
Это может привести к тому, что остальные части системы будут работать медленнее или перестанут вовсе  

**Как избежать:**
Следует использовать параметры --memory и --cpus, чтобы задать пределы для контейнера
Например, можно ограничить контейнер в 512 MB памяти и 1 процессорное ядро, чтобы приложение не могло загружать систему слишком сильно

